# í¬íŒ… ë§¤ë‰´ì–¼ (DODREAM ë°±ì—”ë“œ)

> í´ë”ëª…ì„ 'exec'ë¡œ ì •í™•íˆ ìƒì„±í•´ì£¼ì„¸ìš”.  
> ì†ŒìŠ¤ì½”ë“œëŠ” ì¶”ê°€ë¡œ ì—…ë¡œë“œí•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨
1. [Gitlab ì†ŒìŠ¤ í´ë¡  ì´í›„ ë¹Œë“œ ë° ë°°í¬ ê°€ì´ë“œ](#1-gitlab-ì†ŒìŠ¤-í´ë¡ -ì´í›„-ë¹Œë“œ-ë°-ë°°í¬-ê°€ì´ë“œ)
2. [í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ ì •ë³´](#2-í”„ë¡œì íŠ¸ì—ì„œ-ì‚¬ìš©í•˜ëŠ”-ì™¸ë¶€-ì„œë¹„ìŠ¤-ì •ë³´)
3. [DB ë¤í”„ íŒŒì¼ ìµœì‹ ë³¸](#3-db-ë¤í”„-íŒŒì¼-ìµœì‹ ë³¸)
4. [ì‹œì—° ì‹œë‚˜ë¦¬ì˜¤](#4-ì‹œì—°-ì‹œë‚˜ë¦¬ì˜¤)

---

## 1. Gitlab ì†ŒìŠ¤ í´ë¡  ì´í›„ ë¹Œë“œ ë° ë°°í¬ ê°€ì´ë“œ

### 1.1 ì‚¬ìš©í•œ JVM, ì›¹ì„œë²„, WAS ì œí’ˆ ë“±ì˜ ì¢…ë¥˜ì™€ ì„¤ì • ê°’, ë²„ì „

#### ê°œë°œ í™˜ê²½
- **IDE**: IntelliJ IDEA 2024.x ì´ìƒ ê¶Œì¥
- **JDK**: OpenJDK 17 (Language Level: 17)
- **ë¹Œë“œ ë„êµ¬**: Gradle 8.x
- **í”„ë ˆì„ì›Œí¬**: Spring Boot 3.5.7
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL 8.x
- **ìºì‹œ ì„œë²„**: Redis 6.x ì´ìƒ
- **ì„¤ì • ê´€ë¦¬**: HashiCorp Vault (KV Secrets Engine v2)

#### ì£¼ìš” ì˜ì¡´ì„± ë²„ì „
```gradle
- Spring Boot: 3.5.7
- Spring Cloud: 2025.0.0
- Spring Security
- Spring Data JPA
- Spring Data Redis
- MySQL Connector: ìµœì‹  ë²„ì „
- AWS SDK v2: 2.21.0
- Firebase Admin SDK: 9.3.0
- JWT (jjwt): 0.12.5
- Apache PDFBox: 3.0.1
- SpringDoc OpenAPI: 2.8.13
- Lombok
- Actuator + Prometheus
```

### 1.2 ë¹Œë“œ ì‹œ ì‚¬ìš©ë˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ë“±ì˜ ë‚´ìš© ìƒì„¸ ê¸°ì¬

ë³¸ í”„ë¡œì íŠ¸ëŠ” **HashiCorp Vault**ë¥¼ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

#### Vault í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œ ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:

```bash
# Vault ì ‘ì† ì •ë³´ (í•„ìˆ˜)
export vaultToken="hvs.xxxxxxxxxxxxxx"
export vaultAddr="http://your-vault-server:8200"
```

#### Vaultì— ì €ì¥ë˜ì–´ì•¼ í•˜ëŠ” ì‹œí¬ë¦¿ ì •ë³´

**ê²½ë¡œ: `secret/data/application`** (Vault KV v2 backend)

```yaml
# Database ì„¤ì •
jdbc-url: "jdbc:mysql://your-db-host:3306/dodream?useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true"
username: "your_db_username"
password: "your_db_password"

# JWT ì„¤ì •
jwtSecret: "your-jwt-secret-key-at-least-256-bits-long"

# AWS S3 & CloudFront ì„¤ì •
awsS3Bucket: "your-s3-bucket-name"
awsRegion: "ap-northeast-2"
cloudFrontDomain: "https://your-cloudfront-domain.cloudfront.net"
cloudFrontKeyId: "your-cloudfront-key-pair-id"
privateKeyPem: |
  -----BEGIN PRIVATE KEY-----
  MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC...
  -----END PRIVATE KEY-----

# Naver Clova OCR ì„¤ì •
CLOVA_API_URL: "https://your-clova-api-url"
CLOVA_SECRET_KEY: "your-clova-secret-key"

# Firebase Cloud Messaging ì„¤ì •
firebase-credentials-file: |
  {
    "type": "service_account",
    "project_id": "your-project-id",
    "private_key_id": "xxxxx",
    "private_key": "-----BEGIN PRIVATE KEY-----\nxxxxx\n-----END PRIVATE KEY-----\n",
    "client_email": "firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com",
    "client_id": "xxxxx",
    "auth_uri": "https://accounts.google.com/o/oauth2/auth",
    "token_uri": "https://oauth2.googleapis.com/token",
    "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
    "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-xxxxx%40your-project-id.iam.gserviceaccount.com"
  }

# FastAPI ì„œë²„ URL (AI ë¬¸ì„œ íŒŒì‹± ì„œë²„)
fast_api_url: "http://your-fastapi-server:8000"
```

#### Vault ì„¤ì • ë°©ë²•

1. **Vault ì„œë²„ ì„¤ì¹˜ ë° ì‹¤í–‰**
```bash
# Vault ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
wget https://releases.hashicorp.com/vault/1.15.0/vault_1.15.0_linux_amd64.zip
unzip vault_1.15.0_linux_amd64.zip
sudo mv vault /usr/local/bin/

# Vault ì„œë²„ ì‹œì‘ (ê°œë°œ ëª¨ë“œ)
vault server -dev

# ìƒˆ í„°ë¯¸ë„ì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
export VAULT_ADDR='http://127.0.0.1:8200'
export VAULT_TOKEN='your-root-token'
```

2. **KV Secrets Engine í™œì„±í™”**
```bash
vault secrets enable -path=secret kv-v2
```

3. **ì‹œí¬ë¦¿ ì €ì¥**
```bash
# ê°œë³„ ì‹œí¬ë¦¿ ì €ì¥
vault kv put secret/application \
  jdbc-url="jdbc:mysql://localhost:3306/dodream?useSSL=false&serverTimezone=Asia/Seoul" \
  username="dodream_user" \
  password="your_password" \
  jwtSecret="your-jwt-secret-key-at-least-256-bits-long" \
  awsS3Bucket="your-bucket" \
  awsRegion="ap-northeast-2" \
  cloudFrontDomain="https://xxxxx.cloudfront.net" \
  cloudFrontKeyId="your-key-id" \
  privateKeyPem="-----BEGIN PRIVATE KEY-----..." \
  CLOVA_API_URL="https://clova-api-url" \
  CLOVA_SECRET_KEY="your-clova-key" \
  firebase-credentials-file='{"type":"service_account",...}' \
  fast_api_url="http://localhost:8000"
```

4. **ì‹œí¬ë¦¿ í™•ì¸**
```bash
vault kv get secret/application
```

### 1.3 ë¹Œë“œ ë° ë°°í¬ íŠ¹ì´ì‚¬í•­

#### ë¡œì»¬ ê°œë°œ í™˜ê²½ ë¹Œë“œ

1. **ì €ì¥ì†Œ í´ë¡ **
```bash
git clone <repository-url>
cd be
```

2. **Vault í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```bash
export vaultToken="hvs.xxxxxxxxxxxxxx"
export vaultAddr="http://your-vault-server:8200"
```

3. **Redis ì„œë²„ ì‹¤í–‰ (Docker ì‚¬ìš© ê¶Œì¥)**
```bash
docker run -d -p 6379:6379 --name redis redis:latest
```

4. **Gradle ë¹Œë“œ**
```bash
# Windows
gradlew.bat clean build

# Linux/Mac
./gradlew clean build
```

5. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰**
```bash
# Windows
gradlew.bat bootRun

# Linux/Mac
./gradlew bootRun

# ë˜ëŠ” ë¹Œë“œëœ JAR ì‹¤í–‰
java -jar build/libs/DODREAM-0.0.1-SNAPSHOT.jar
```

#### ìš´ì˜ í™˜ê²½ ë°°í¬ (Docker ì‚¬ìš©)

1. **Dockerfile ìƒì„±** (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—)
```dockerfile
FROM eclipse-temurin:17-jdk-alpine
WORKDIR /app
COPY build/libs/*.jar app.jar

# Vault í™˜ê²½ ë³€ìˆ˜ëŠ” ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ì£¼ì…
EXPOSE 8080

ENTRYPOINT ["java", "-jar", "app.jar"]
```

2. **Docker ì´ë¯¸ì§€ ë¹Œë“œ**
```bash
./gradlew clean build
docker build -t dodream-backend:latest .
```

3. **Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
```bash
docker run -d \
  --name dodream-backend \
  -p 8080:8080 \
  -e vaultToken="hvs.xxxxxxxxxxxxxx" \
  -e vaultAddr="http://vault-server:8200" \
  dodream-backend:latest
```

#### íŠ¹ì´ì‚¬í•­

1. **ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •**
   - Spring Bootì—ì„œ ìµœëŒ€ 2GB íŒŒì¼ ì—…ë¡œë“œ ì§€ì›
   - Tomcat ì„¤ì •: `max-http-form-post-size: 2GB`

2. **íŒŒì¼ ì €ì¥ ë””ë ‰í† ë¦¬**
   - ì—…ë¡œë“œ: `${user.home}/dodream/uploads`
   - ì„ì‹œ: `${user.home}/dodream/temp`
   - ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ìë™ ìƒì„±ë¨

3. **ë¹„ë™ê¸° ì²˜ë¦¬**
   - PDF OCR ì²˜ë¦¬ëŠ” ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë¨ (`@Async`)
   - Thread Pool ì„¤ì • í•„ìš” ì‹œ `AsyncConfig.java` ì°¸ê³ 

4. **ëª¨ë‹ˆí„°ë§**
   - Prometheus ë©”íŠ¸ë¦­ í™œì„±í™”: `/actuator/prometheus`
   - Health Check: `/actuator/health`

5. **Swagger UI**
   - ê°œë°œ í™˜ê²½: `http://localhost:8080/api/swagger-ui`
   - API ë¬¸ì„œ: `http://localhost:8080/api/v3/api-docs`

### 1.4 DB ì ‘ì† ì •ë³´ ë“± í”„ë¡œì íŠ¸(ERD)ì— í™œìš©ë˜ëŠ” ì£¼ìš” ê³„ì • ë° í”„ë¡œí¼í‹°ê°€ ì •ì˜ëœ íŒŒì¼ ëª©ë¡

#### ì„¤ì • íŒŒì¼ ìœ„ì¹˜
- `src/main/resources/application.yml` - ë©”ì¸ ì„¤ì • íŒŒì¼ (Vault ì—°ë™ ì„¤ì • í¬í•¨)

#### Vault Properties í´ë˜ìŠ¤
- `src/main/java/A704/DODREAM/config/vault/JwtProperties.java` - JWT ì„¤ì •
- `src/main/java/A704/DODREAM/config/vault/S3Properties.java` - AWS S3/CloudFront ì„¤ì •
- `src/main/java/A704/DODREAM/config/vault/ClovaProperties.java` - Naver Clova OCR ì„¤ì •

#### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
ë³¸ í”„ë¡œì íŠ¸ëŠ” JPAì˜ `ddl-auto: update` ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì—”í‹°í‹° ê¸°ë°˜ìœ¼ë¡œ ìë™ ìŠ¤í‚¤ë§ˆ ìƒì„±í•©ë‹ˆë‹¤.

**ì£¼ìš” ì—”í‹°í‹°:**
- `User` - ì‚¬ìš©ì ì •ë³´ (í•™ìƒ/êµì‚¬)
- `PasswordCredential` - ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ ì •ë³´
- `DeviceCredential` - ë””ë°”ì´ìŠ¤ ì¸ì¦ ì •ë³´
- `UploadedFile` - ì—…ë¡œë“œëœ PDF íŒŒì¼ ë©”íƒ€ë°ì´í„°
- `OcrPage` - OCR ì²˜ë¦¬ëœ í˜ì´ì§€ ì •ë³´
- `OcrWord` - OCR ì¶”ì¶œ ë‹¨ì–´ ë° ì¢Œí‘œ
- `Material` - í•™ìŠµ ìë£Œ
- `Quiz` - í€´ì¦ˆ ì •ë³´
- `ProgressReport` - í•™ìŠµ ì§„í–‰ ë³´ê³ ì„œ
- `Bookmark` - ë¶ë§ˆí¬
- `UserDevices` - FCM í† í° ë° ë””ë°”ì´ìŠ¤ ì •ë³´

#### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì •
```sql
-- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
CREATE DATABASE dodream CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- ì‚¬ìš©ì ìƒì„± ë° ê¶Œí•œ ë¶€ì—¬
CREATE USER 'dodream_user'@'%' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON dodream.* TO 'dodream_user'@'%';
FLUSH PRIVILEGES;
```

---

## 2. í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì™¸ë¶€ ì„œë¹„ìŠ¤ ì •ë³´

ë³¸ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ê°€ì… ë° ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

### 2.1 HashiCorp Vault (ì„¤ì • ê´€ë¦¬)

**ìš©ë„**: ë¯¼ê°í•œ í™˜ê²½ ë³€ìˆ˜ ë° ì‹œí¬ë¦¿ ì •ë³´ ì¤‘ì•™ ê´€ë¦¬

**ê°€ì… ë° ì„¤ì •**:
1. Vault ì„œë²„ ì„¤ì¹˜: https://www.vaultproject.io/downloads
2. ê°œë°œ ëª¨ë“œ ë˜ëŠ” ìš´ì˜ ëª¨ë“œë¡œ ì„œë²„ ì‹¤í–‰
3. KV Secrets Engine v2 í™œì„±í™”
4. `secret/application` ê²½ë¡œì— ì‹œí¬ë¦¿ ì €ì¥

**í•„ìš”í•œ ì •ë³´**:
- `vaultAddr`: Vault ì„œë²„ URL (ì˜ˆ: `http://localhost:8200`)
- `vaultToken`: Vault ì ‘ê·¼ í† í° (ì˜ˆ: `hvs.xxxxxx`)

**ê³µì‹ ë¬¸ì„œ**: https://www.vaultproject.io/docs

---

### 2.2 AWS (S3 + CloudFront)

**ìš©ë„**: PDF íŒŒì¼ ìŠ¤í† ë¦¬ì§€ ë° CDNì„ í†µí•œ ì•ˆì „í•œ ì½˜í…ì¸  ë°°í¬

**ê°€ì… ë° ì„¤ì •**:
1. AWS ê³„ì • ìƒì„±: https://aws.amazon.com/
2. IAM ì‚¬ìš©ì ìƒì„± ë° S3 FullAccess ê¶Œí•œ ë¶€ì—¬
3. S3 ë²„í‚· ìƒì„± (ë²„í‚·ëª… ì˜ˆ: `dodream-files`)
4. CloudFront Distribution ìƒì„±
   - Origin: S3 ë²„í‚·
   - Signed URLs í™œì„±í™” (Private Key ìƒì„±)
5. CloudFront Key Pair ìƒì„± ë° Private Key ë‹¤ìš´ë¡œë“œ

**í•„ìš”í•œ ì •ë³´**:
- `awsS3Bucket`: S3 ë²„í‚·ëª…
- `awsRegion`: AWS ë¦¬ì „ (ì˜ˆ: `ap-northeast-2`)
- `cloudFrontDomain`: CloudFront ë„ë©”ì¸ (ì˜ˆ: `https://d1234567890abc.cloudfront.net`)
- `cloudFrontKeyId`: CloudFront Key Pair ID
- `privateKeyPem`: CloudFront Private Key (PEM í˜•ì‹)

**ì„¤ì • ìœ„ì¹˜**: Vault `secret/application`

**ì°¸ê³  ë¬¸ì„œ**:
- S3: https://docs.aws.amazon.com/s3/
- CloudFront Signed URLs: https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html

---

### 2.3 Naver Clova OCR

**ìš©ë„**: PDF ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (OCR)

**ê°€ì… ë° ì„¤ì •**:
1. Naver Cloud Platform ê°€ì…: https://www.ncloud.com/
2. Clova OCR ì„œë¹„ìŠ¤ ì‹ ì²­
3. ë„ë©”ì¸ ë“±ë¡ ë° API í‚¤ ë°œê¸‰
4. Secret Key ë³µì‚¬

**í•„ìš”í•œ ì •ë³´**:
- `CLOVA_API_URL`: Clova OCR API ì—”ë“œí¬ì¸íŠ¸
- `CLOVA_SECRET_KEY`: Clova OCR Secret Key

**ì„¤ì • ìœ„ì¹˜**: Vault `secret/application`

**API ë¬¸ì„œ**: https://api.ncloud-docs.com/docs/ai-naver-clovaocr

**ì°¸ê³ **: 
- OCR ì²˜ë¦¬ëŠ” ë¹„ë™ê¸°ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
- ìƒì„¸ ë‚´ìš©ì€ `OCR_API_GUIDE.md` ì°¸ê³ 

---

### 2.4 Google Firebase Cloud Messaging (FCM)

**ìš©ë„**: í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ (í•™ìƒ/êµì‚¬ ì•±)

**ê°€ì… ë° ì„¤ì •**:
1. Firebase Console ì ‘ì†: https://console.firebase.google.com/
2. í”„ë¡œì íŠ¸ ìƒì„±
3. Firebase Admin SDK ì„œë¹„ìŠ¤ ê³„ì • í‚¤ ìƒì„±
   - í”„ë¡œì íŠ¸ ì„¤ì • > ì„œë¹„ìŠ¤ ê³„ì • > ìƒˆ ë¹„ê³µê°œ í‚¤ ìƒì„±
4. JSON íŒŒì¼ ë‹¤ìš´ë¡œë“œ

**í•„ìš”í•œ ì •ë³´**:
- `firebase-credentials-file`: ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ ë‚´ìš© ì „ì²´ (ë¬¸ìì—´ë¡œ ë³€í™˜)

**ì„¤ì • ìœ„ì¹˜**: Vault `secret/application`

**API ë¬¸ì„œ**: https://firebase.google.com/docs/cloud-messaging

**ì°¸ê³ **:
- í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ FCM í† í°ì„ ì„œë²„ì— ë“±ë¡í•´ì•¼ ì•Œë¦¼ ì „ì†¡ ê°€ëŠ¥
- ì—”ë“œí¬ì¸íŠ¸: `POST /api/fcm/register`

---

### 2.5 FastAPI ì„œë²„ (AI ë¬¸ì„œ íŒŒì‹±)

**ìš©ë„**: PDF ë¬¸ì„œë¥¼ AIë¡œ íŒŒì‹±í•˜ì—¬ í•™ìŠµ ìë£Œ ìƒì„±

**ì„¤ì •**:
- FastAPI ì„œë²„ëŠ” ë³„ë„ Python í”„ë¡œì íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- FastAPI ì„œë²„ ì‹¤í–‰ í›„ URLì„ Vaultì— ë“±ë¡

**í•„ìš”í•œ ì •ë³´**:
- `fast_api_url`: FastAPI ì„œë²„ ì£¼ì†Œ (ì˜ˆ: `http://localhost:8000`)

**ì„¤ì • ìœ„ì¹˜**: Vault `secret/application`

**API ì—”ë“œí¬ì¸íŠ¸**:
- `POST /document/parse-pdf-from-cloudfront` - CloudFront URLë¡œë¶€í„° PDF íŒŒì‹±

---

### 2.6 MySQL Database

**ìš©ë„**: ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤

**ì„¤ì •**:
1. MySQL 8.0 ì´ìƒ ì„¤ì¹˜
2. UTF-8 (utf8mb4) ì¸ì½”ë”© ì‚¬ìš©
3. ë°ì´í„°ë² ì´ìŠ¤ ë° ì‚¬ìš©ì ìƒì„± (ìœ„ 1.4 ì°¸ê³ )

**í•„ìš”í•œ ì •ë³´**:
- `jdbc-url`: JDBC ì—°ê²° URL
- `username`: DB ì‚¬ìš©ìëª…
- `password`: DB ë¹„ë°€ë²ˆí˜¸

**ì„¤ì • ìœ„ì¹˜**: Vault `secret/application`

---

### 2.7 Redis

**ìš©ë„**: ì„¸ì…˜ ìºì‹±, Refresh Token ì €ì¥

**ì„¤ì •**:
1. Redis 6.x ì´ìƒ ì„¤ì¹˜
2. ê¸°ë³¸ í¬íŠ¸ 6379 ì‚¬ìš© (ë³€ê²½ ê°€ëŠ¥)

**ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •**:
- `application.yml`ì˜ `spring.data.redis.port` ì°¸ê³ 
- Redis í˜¸ìŠ¤íŠ¸ëŠ” localhost ê¸°ë³¸ê°’ (ë³€ê²½ í•„ìš” ì‹œ `application.yml` ìˆ˜ì •)

---

### 2.8 ì™¸ë¶€ ì„œë¹„ìŠ¤ ìš”ì•½í‘œ

| ì„œë¹„ìŠ¤ | ìš©ë„ | ê°€ì… í•„ìš” | ì„¤ì • ìœ„ì¹˜ | ë¬¸ì„œ ë§í¬ |
|--------|------|-----------|-----------|-----------|
| HashiCorp Vault | ì‹œí¬ë¦¿ ê´€ë¦¬ | âœ… | í™˜ê²½ ë³€ìˆ˜ | [Link](https://www.vaultproject.io/) |
| AWS S3 | íŒŒì¼ ìŠ¤í† ë¦¬ì§€ | âœ… | Vault | [Link](https://aws.amazon.com/s3/) |
| AWS CloudFront | CDN | âœ… | Vault | [Link](https://aws.amazon.com/cloudfront/) |
| Naver Clova OCR | í…ìŠ¤íŠ¸ ì¶”ì¶œ | âœ… | Vault | [Link](https://www.ncloud.com/product/aiService/ocr) |
| Google FCM | í‘¸ì‹œ ì•Œë¦¼ | âœ… | Vault | [Link](https://firebase.google.com/docs/cloud-messaging) |
| FastAPI ì„œë²„ | AI ë¬¸ì„œ íŒŒì‹± | - | Vault | ë³„ë„ ë¬¸ì„œ ì°¸ê³  |
| MySQL | ë°ì´í„°ë² ì´ìŠ¤ | âœ… | Vault | [Link](https://www.mysql.com/) |
| Redis | ìºì‹œ ì„œë²„ | âœ… | application.yml | [Link](https://redis.io/) |

---

## 3. DB ë¤í”„ íŒŒì¼ ìµœì‹ ë³¸

### 3.1 DB ë¤í”„ íŒŒì¼ ìœ„ì¹˜

```
exec/
  â”œâ”€â”€ dodream_dump_YYYYMMDD.sql   # ìµœì‹  ë¤í”„ íŒŒì¼
  â””â”€â”€ í¬íŒ…_ë§¤ë‰´ì–¼.md
```

### 3.2 ë¤í”„ íŒŒì¼ ìƒì„± ë°©ë²•

```bash
# ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ë¤í”„
mysqldump -u dodream_user -p \
  --databases dodream \
  --single-transaction \
  --routines \
  --triggers \
  --events \
  > dodream_dump_$(date +%Y%m%d).sql

# ìŠ¤í‚¤ë§ˆë§Œ ë¤í”„ (ë°ì´í„° ì œì™¸)
mysqldump -u dodream_user -p \
  --no-data \
  --databases dodream \
  > dodream_schema_only.sql
```

### 3.3 ë¤í”„ íŒŒì¼ ë³µì› ë°©ë²•

```bash
# MySQL ì ‘ì† í›„ ë³µì›
mysql -u dodream_user -p < dodream_dump_YYYYMMDD.sql

# ë˜ëŠ” MySQL ë‚´ë¶€ì—ì„œ
mysql -u dodream_user -p
source /path/to/dodream_dump_YYYYMMDD.sql;
```

### 3.4 ì£¼ìš” í…Œì´ë¸” ëª©ë¡

- **ì‚¬ìš©ì ë° ì¸ì¦**
  - `user` - ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´
  - `password_credential` - ë¹„ë°€ë²ˆí˜¸ ì¸ì¦
  - `device_credential` - ë””ë°”ì´ìŠ¤ ì¸ì¦
  - `user_devices` - FCM í† í° ë° ë””ë°”ì´ìŠ¤ ì •ë³´

- **íŒŒì¼ ë° OCR**
  - `uploaded_file` - ì—…ë¡œë“œëœ íŒŒì¼ ë©”íƒ€ë°ì´í„°
  - `ocr_page` - OCR í˜ì´ì§€ ì •ë³´
  - `ocr_word` - OCR ë‹¨ì–´ ë° ì¢Œí‘œ

- **í•™ìŠµ ìë£Œ**
  - `material` - í•™ìŠµ ìë£Œ
  - `quiz` - í€´ì¦ˆ
  - `quiz_option` - í€´ì¦ˆ ì„ íƒì§€
  - `material_content` - ìë£Œ ì½˜í…ì¸ 

- **í•™ìŠµ ì§„í–‰**
  - `progress_report` - í•™ìŠµ ì§„í–‰ ë³´ê³ ì„œ
  - `bookmark` - ë¶ë§ˆí¬

- **ë“±ë¡ ë° ê´€ê³„**
  - `class_registry` - í´ë˜ìŠ¤ ë“±ë¡
  - `student_registry` - í•™ìƒ ë“±ë¡

---

## 4. ì‹œì—° ì‹œë‚˜ë¦¬ì˜¤

### 4.1 ì‹œì—° ì¤€ë¹„ì‚¬í•­

1. **ì„œë²„ ì‹¤í–‰ í™•ì¸**
   - ë°±ì—”ë“œ ì„œë²„: `http://localhost:8080`
   - FastAPI ì„œë²„: `http://localhost:8000`
   - Redis ì„œë²„: `localhost:6379`
   - MySQL ì„œë²„: `localhost:3306`

2. **Swagger UI ì ‘ì†**
   - URL: `http://localhost:8080/api/swagger-ui`

3. **í…ŒìŠ¤íŠ¸ ê³„ì • ì¤€ë¹„**
   - êµì‚¬ ê³„ì •: `teacher@dodream.com` / `password123`
   - í•™ìƒ ê³„ì •: `student@dodream.com` / `password123`

---

### 4.2 ì‹œì—° ì‹œë‚˜ë¦¬ì˜¤ ìƒì„¸

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 1: êµì‚¬ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸

**1ë‹¨ê³„: êµì‚¬ íšŒì›ê°€ì…**
- **í™”ë©´**: íšŒì›ê°€ì… í˜ì´ì§€
- **ë™ì‘**: 
  1. "êµì‚¬ë¡œ ê°€ì…í•˜ê¸°" ë²„íŠ¼ í´ë¦­
  2. ì´ë¦„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
  3. "ê°€ì… ì™„ë£Œ" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/auth/teacher/register`
- **ê²°ê³¼**: íšŒì›ê°€ì… ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ

**2ë‹¨ê³„: êµì‚¬ ë¡œê·¸ì¸**
- **í™”ë©´**: ë¡œê·¸ì¸ í˜ì´ì§€
- **ë™ì‘**:
  1. ê°€ì…í•œ ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
  2. "ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/auth/teacher/login`
- **ê²°ê³¼**: Access Token, Refresh Token ë°œê¸‰ ë° í™ˆ í™”ë©´ ì´ë™

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 2: PDF í•™ìŠµ ìë£Œ ì—…ë¡œë“œ ë° OCR ì²˜ë¦¬

**3ë‹¨ê³„: PDF íŒŒì¼ ì—…ë¡œë“œ**
- **í™”ë©´**: ìë£Œ ì—…ë¡œë“œ í˜ì´ì§€
- **ë™ì‘**:
  1. "íŒŒì¼ ì„ íƒ" ë²„íŠ¼ í´ë¦­
  2. PDF íŒŒì¼ ì„ íƒ (ì˜ˆ: ìˆ˜í•™ êµì¬)
  3. "ì—…ë¡œë“œ ì‹œì‘" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/files/pdf/upload`
- **ê²°ê³¼**: 
  - PDF íŒŒì¼ì´ S3ì— ì—…ë¡œë“œë¨
  - FastAPI ì„œë²„ë¡œ íŒŒì‹± ìš”ì²­ ì „ì†¡
  - íŒŒì‹± ì§„í–‰ ì¤‘ ìƒíƒœ í‘œì‹œ

**4ë‹¨ê³„: íŒŒì‹± ê²°ê³¼ í™•ì¸**
- **í™”ë©´**: ìë£Œ ìƒì„¸ í˜ì´ì§€
- **ë™ì‘**:
  1. ì—…ë¡œë“œí•œ ìë£Œ í´ë¦­
  2. íŒŒì‹±ëœ ëª©ì°¨ ë° ë‚´ìš© í™•ì¸
- **API**: `GET /api/files/{fileId}/parsed-content`
- **ê²°ê³¼**: 
  - ìë™ ìƒì„±ëœ ëª©ì°¨ í‘œì‹œ
  - í˜ì´ì§€ë³„ ë‚´ìš© í‘œì‹œ
  - í•˜ì´ë¼ì´íŒ… ê°€ëŠ¥í•œ í…ìŠ¤íŠ¸ ì˜ì—­ í‘œì‹œ

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 3: í•™ìŠµ ìë£Œ ìƒì„± ë° í€´ì¦ˆ ì¶œì œ

**5ë‹¨ê³„: í•™ìŠµ ìë£Œ ìƒì„±**
- **í™”ë©´**: ìë£Œ í¸ì§‘ í˜ì´ì§€
- **ë™ì‘**:
  1. íŒŒì‹±ëœ ë‚´ìš©ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ ì„ íƒ
  2. ì œëª©, ì„¤ëª… ì…ë ¥
  3. "í•™ìŠµ ìë£Œ ìƒì„±" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/materials`
- **ê²°ê³¼**: í•™ìŠµ ìë£Œ ìƒì„± ì™„ë£Œ

**6ë‹¨ê³„: AI í€´ì¦ˆ ìë™ ìƒì„±**
- **í™”ë©´**: í€´ì¦ˆ ìƒì„± í˜ì´ì§€
- **ë™ì‘**:
  1. "AI í€´ì¦ˆ ìƒì„±" ë²„íŠ¼ í´ë¦­
  2. ë‚œì´ë„ ì„ íƒ (ì‰¬ì›€/ë³´í†µ/ì–´ë ¤ì›€)
  3. ë¬¸ì œ ìˆ˜ ì„ íƒ (5ë¬¸ì œ/10ë¬¸ì œ/15ë¬¸ì œ)
  4. "ìƒì„±í•˜ê¸°" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/materials/{materialId}/quiz/generate`
- **ê²°ê³¼**: AIê°€ í•™ìŠµ ë‚´ìš© ê¸°ë°˜ìœ¼ë¡œ í€´ì¦ˆ ìë™ ìƒì„±

**7ë‹¨ê³„: ìƒì„±ëœ í€´ì¦ˆ í™•ì¸ ë° ìˆ˜ì •**
- **í™”ë©´**: í€´ì¦ˆ í¸ì§‘ í˜ì´ì§€
- **ë™ì‘**:
  1. ìƒì„±ëœ í€´ì¦ˆ ëª©ë¡ í™•ì¸
  2. í•„ìš” ì‹œ ë¬¸ì œ ìˆ˜ì • ë˜ëŠ” ì‚­ì œ
  3. "ì €ì¥" ë²„íŠ¼ í´ë¦­
- **API**: `PUT /api/quizzes/{quizId}`
- **ê²°ê³¼**: í€´ì¦ˆ ì €ì¥ ì™„ë£Œ

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 4: í•™ìƒ ë“±ë¡ ë° í•™ìŠµ ìë£Œ ë°°í¬

**8ë‹¨ê³„: í´ë˜ìŠ¤ ìƒì„±**
- **í™”ë©´**: í´ë˜ìŠ¤ ê´€ë¦¬ í˜ì´ì§€
- **ë™ì‘**:
  1. "ìƒˆ í´ë˜ìŠ¤ ë§Œë“¤ê¸°" ë²„íŠ¼ í´ë¦­
  2. í´ë˜ìŠ¤ëª… ì…ë ¥ (ì˜ˆ: "ìˆ˜í•™ ê¸°ì´ˆë°˜")
  3. í•™ë…„/í•™ê¸° ì„ íƒ
  4. "ìƒì„±" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/classes`
- **ê²°ê³¼**: í´ë˜ìŠ¤ ìƒì„± ë° ì´ˆëŒ€ ì½”ë“œ ë°œê¸‰

**9ë‹¨ê³„: í•™ìƒ ì´ˆëŒ€**
- **í™”ë©´**: í´ë˜ìŠ¤ ìƒì„¸ í˜ì´ì§€
- **ë™ì‘**:
  1. "í•™ìƒ ì´ˆëŒ€" ë²„íŠ¼ í´ë¦­
  2. ì´ˆëŒ€ ì½”ë“œ ë³µì‚¬
  3. í•™ìƒì—ê²Œ ì „ë‹¬
- **í´ë¦­ ìœ„ì¹˜**: ì´ˆëŒ€ ì½”ë“œ ì˜† ë³µì‚¬ ì•„ì´ì½˜
- **ê²°ê³¼**: ì´ˆëŒ€ ì½”ë“œ í´ë¦½ë³´ë“œì— ë³µì‚¬ë¨

**10ë‹¨ê³„: í•™ìŠµ ìë£Œ ë°°í¬**
- **í™”ë©´**: ìë£Œ ë°°í¬ í˜ì´ì§€
- **ë™ì‘**:
  1. ë°°í¬í•  í•™ìŠµ ìë£Œ ì„ íƒ
  2. ëŒ€ìƒ í´ë˜ìŠ¤ ì„ íƒ
  3. ë°°í¬ ë‚ ì§œ ì„¤ì •
  4. "ë°°í¬í•˜ê¸°" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/materials/{materialId}/publish`
- **ê²°ê³¼**: í•™ìƒë“¤ì—ê²Œ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ ë° ìë£Œ ê³µê°œ

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 5: í•™ìƒ ë¡œê·¸ì¸ ë° í•™ìŠµ ì§„í–‰

**11ë‹¨ê³„: í•™ìƒ ë¡œê·¸ì¸**
- **í™”ë©´**: í•™ìƒ ë¡œê·¸ì¸ í˜ì´ì§€
- **ë™ì‘**:
  1. í•™ìƒ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
  2. ì´ˆëŒ€ ì½”ë“œ ì…ë ¥í•˜ì—¬ í´ë˜ìŠ¤ ê°€ì…
- **API**: `POST /api/auth/student/login`
- **ê²°ê³¼**: í•™ìƒ í™ˆ í™”ë©´ ì´ë™, ë°°í¬ëœ ìë£Œ ëª©ë¡ í‘œì‹œ

**12ë‹¨ê³„: í•™ìŠµ ìë£Œ ì—´ëŒ**
- **í™”ë©´**: í•™ìŠµ ìë£Œ ë·°ì–´
- **ë™ì‘**:
  1. ë°°í¬ëœ í•™ìŠµ ìë£Œ í´ë¦­
  2. í˜ì´ì§€ë³„ ë‚´ìš© ì½ê¸°
  3. ì¤‘ìš”í•œ ë¶€ë¶„ ë¶ë§ˆí¬
- **API**: 
  - `GET /api/materials/{materialId}`
  - `POST /api/bookmarks`
- **ê²°ê³¼**: í•™ìŠµ ì§„í–‰ ìƒí™© ìë™ ì €ì¥

**13ë‹¨ê³„: í€´ì¦ˆ í’€ê¸°**
- **í™”ë©´**: í€´ì¦ˆ í˜ì´ì§€
- **ë™ì‘**:
  1. "í€´ì¦ˆ ì‹œì‘" ë²„íŠ¼ í´ë¦­
  2. ë¬¸ì œë³„ë¡œ ë‹µ ì„ íƒ
  3. "ì œì¶œí•˜ê¸°" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/quizzes/{quizId}/submit`
- **ê²°ê³¼**: 
  - ì •ë‹µ/ì˜¤ë‹µ ì¦‰ì‹œ í‘œì‹œ
  - ì ìˆ˜ ë° í•´ì„¤ ì œê³µ
  - ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 6: êµì‚¬ì˜ í•™ìŠµ ì§„í–‰ ëª¨ë‹ˆí„°ë§

**14ë‹¨ê³„: í•™ìƒ ì§„í–‰ ìƒí™© í™•ì¸**
- **í™”ë©´**: í•™ìƒ ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
- **ë™ì‘**:
  1. "í•™ìƒ ê´€ë¦¬" ë©”ë‰´ í´ë¦­
  2. í´ë˜ìŠ¤ ì„ íƒ
  3. í•™ìƒë³„ ì§„í–‰ë¥  í™•ì¸
- **API**: `GET /api/reports/class/{classId}`
- **ê²°ê³¼**: 
  - í•™ìƒë³„ í•™ìŠµ ì§„í–‰ë¥  ê·¸ë˜í”„ í‘œì‹œ
  - ìë£Œë³„ ì™„ë£Œ í˜„í™© í‘œì‹œ
  - í€´ì¦ˆ í‰ê·  ì ìˆ˜ í‘œì‹œ

**15ë‹¨ê³„: ê°œë³„ í•™ìƒ ìƒì„¸ ë³´ê³ ì„œ í™•ì¸**
- **í™”ë©´**: í•™ìƒ ìƒì„¸ í˜ì´ì§€
- **ë™ì‘**:
  1. íŠ¹ì • í•™ìƒ í´ë¦­
  2. í•™ìŠµ ê¸°ë¡ í™•ì¸
  3. ì·¨ì•½ ë¶€ë¶„ íŒŒì•…
- **API**: `GET /api/reports/student/{studentId}`
- **ê²°ê³¼**:
  - ì‹œê°„ëŒ€ë³„ í•™ìŠµ íŒ¨í„´ ê·¸ë˜í”„
  - ìë£Œë³„ ì²´ë¥˜ ì‹œê°„ ë° ë¶ë§ˆí¬ ìœ„ì¹˜
  - í€´ì¦ˆ ì •ë‹µë¥  ë¶„ì„

**16ë‹¨ê³„: ë§ì¶¤í˜• í”¼ë“œë°± ì „ì†¡**
- **í™”ë©´**: í”¼ë“œë°± ì‘ì„± í˜ì´ì§€
- **ë™ì‘**:
  1. "í”¼ë“œë°± ë³´ë‚´ê¸°" ë²„íŠ¼ í´ë¦­
  2. í”¼ë“œë°± ë‚´ìš© ì‘ì„±
  3. "ì „ì†¡" ë²„íŠ¼ í´ë¦­
- **API**: `POST /api/fcm/send`
- **ê²°ê³¼**: í•™ìƒì—ê²Œ í‘¸ì‹œ ì•Œë¦¼ìœ¼ë¡œ í”¼ë“œë°± ì „ë‹¬

---

#### ğŸ“ ì‹œë‚˜ë¦¬ì˜¤ 7: ëŒ€í™”í˜• AI í•™ìŠµ ë„ìš°ë¯¸ (ì„ íƒì  ê¸°ëŠ¥)

**17ë‹¨ê³„: AI ì±—ë´‡ê³¼ ëŒ€í™”**
- **í™”ë©´**: í•™ìŠµ ìë£Œ ë·°ì–´ í•˜ë‹¨ ì±—ë´‡ ì˜ì—­
- **ë™ì‘**:
  1. ëª¨ë¥´ëŠ” ë‚´ìš©ì— ëŒ€í•´ ì§ˆë¬¸ ì…ë ¥
  2. AIì˜ ì„¤ëª… í™•ì¸
  3. ì¶”ê°€ ì§ˆë¬¸ ì§„í–‰
- **ê²°ê³¼**: í•™ìŠµ ìë£Œ ë‚´ìš© ê¸°ë°˜ ë§ì¶¤í˜• ë‹µë³€ ì œê³µ

---

### 4.3 ì‹œì—° ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] êµì‚¬ íšŒì›ê°€ì… ë° ë¡œê·¸ì¸
- [ ] PDF ì—…ë¡œë“œ ë° ìë™ íŒŒì‹±
- [ ] AI í€´ì¦ˆ ìƒì„±
- [ ] í´ë˜ìŠ¤ ìƒì„± ë° í•™ìƒ ì´ˆëŒ€
- [ ] í•™ìŠµ ìë£Œ ë°°í¬ ë° í‘¸ì‹œ ì•Œë¦¼
- [ ] í•™ìƒ í•™ìŠµ ì§„í–‰
- [ ] ë¶ë§ˆí¬ ê¸°ëŠ¥
- [ ] í€´ì¦ˆ í’€ì´ ë° ì±„ì 
- [ ] êµì‚¬ì˜ í•™ìƒ ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§
- [ ] ë§ì¶¤í˜• í”¼ë“œë°± ì „ì†¡

---

### 4.4 ì‹œì—° ì‹œ ì£¼ì˜ì‚¬í•­

1. **ë„¤íŠ¸ì›Œí¬ í™˜ê²½**
   - ì•ˆì •ì ì¸ ì¸í„°ë„· ì—°ê²° í•„ìš” (AWS, Clova OCR, FCM ì‚¬ìš©)
   - ë°©í™”ë²½ ì„¤ì • í™•ì¸

2. **ì‚¬ì „ ë°ì´í„° ì¤€ë¹„**
   - í…ŒìŠ¤íŠ¸ìš© PDF íŒŒì¼ (í•œê¸€/ì˜ì–´ í˜¼í•©, 10-20í˜ì´ì§€ ê¶Œì¥)
   - êµì‚¬/í•™ìƒ í…ŒìŠ¤íŠ¸ ê³„ì • ì‚¬ì „ ìƒì„±

3. **ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­**
   - PDF íŒŒì‹±ì€ íŒŒì¼ í¬ê¸°ì— ë”°ë¼ 1-5ë¶„ ì†Œìš”
   - AI í€´ì¦ˆ ìƒì„±ì€ ë‚´ìš© ê¸¸ì´ì— ë”°ë¼ 30ì´ˆ-2ë¶„ ì†Œìš”

4. **ë°±ì—… í”Œëœ**
   - íŒŒì‹±ì´ ì˜¤ë˜ ê±¸ë¦´ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ë¯¸ë¦¬ íŒŒì‹±ëœ ìë£Œ ì¤€ë¹„
   - ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì‹œë¥¼ ëŒ€ë¹„í•´ ë¡œì»¬ ë°ëª¨ ì˜ìƒ ì¤€ë¹„

---

## ğŸ“ ì¶”ê°€ ì°¸ê³  ìë£Œ

- **API ìƒì„¸ ë¬¸ì„œ**: Swagger UI (`/api/swagger-ui`)
- **OCR ê°€ì´ë“œ**: `OCR_API_GUIDE.md`
- **í”„ë¡œì íŠ¸ êµ¬ì¡°**: `README.md`

---

## â“ ë¬¸ì˜ì‚¬í•­

ê¸°ìˆ ì  ë¬¸ì˜ì‚¬í•­ì€ í”„ë¡œì íŠ¸ íŒ€ì— ë¬¸ì˜í•´ì£¼ì„¸ìš”.

**ì‘ì„±ì¼**: 2025-11-17  
**ë²„ì „**: 1.0


